<link rel="stylesheet" href="frontend/assets/css/custom-profile.css">

<div class="profile-wrapper py-5">
    <div class="container">
        <div class="row g-4">
            
            <div class="col-lg-4 col-xl-3">
                <div class="card mb-4">
                    <div class="card-body text-center p-4">
                        <div class="position-relative d-inline-block mb-3">
                            <img src="https://ui-avatars.com/api/?name=User&background=random" id="user-avatar" class="rounded-circle" width="100" height="100" alt="Avatar">
                            <span class="position-absolute bottom-0 end-0 bg-success border border-white rounded-circle"></span>
                        </div>
                        <h5 class="fw-bold text-dark mb-1" id="user-fullname">Đang tải...</h5>
                        <p class="text-muted small mb-3" id="user-email">loading...</p>
                        
                        <div id="vip-badge-container">
                            </div>
                    </div>
                </div>

                <div class="card">
                    <div class="list-group list-group-flush p-3">
                        <a href="#account-general" data-bs-toggle="list" class="list-group-item list-group-item-action active">
                            <i class="bi bi-person-gear me-2"></i> Thông tin cá nhân
                        </a>
                        <a href="#account-security" data-bs-toggle="list" class="list-group-item list-group-item-action">
                            <i class="bi bi-shield-lock me-2"></i> Bảo mật & Mật khẩu
                        </a>
                        <a href="#account-billing" data-bs-toggle="list" class="list-group-item list-group-item-action">
                            <i class="bi bi-credit-card-2-front me-2"></i> Gói thành viên
                        </a>
                        <button type="button" id="Logout" class="list-group-item list-group-item-action mt-2">
                            <i class="bi bi-box-arrow-right me-2"></i> Đăng xuất
                        </button>
                    </div>
                </div>
            </div>

            <div class="col-lg-8 col-xl-9">
                <div class="tab-content">
                    
                    <div class="tab-pane fade show active" id="account-general">
                        <div class="card h-100">
                            <div class="card-header p-4 pb-0">
                                <h5 class="fw-bold text-dark mb-0"><i class="bi bi-person-lines-fill me-2 text-primary"></i>Hồ sơ của tôi</h5>
                            </div>
                            <div class="card-body p-4">
                                <form id="updateProfileForm">
                                    <div class="row g-4">
                                        <div class="col-md-6">
                                            <label class="form-label small fw-bold text-secondary">Tên đăng nhập</label>
                                            <input type="text" id="input-username" class="form-control" readonly>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label small fw-bold text-secondary">Họ và Tên</label>
                                            <input type="text" id="input-fullname" class="form-control" readonly>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label small fw-bold text-secondary">Email</label>
                                            <input type="email" id="input-email" class="form-control" readonly>
                                        </div>
                                        <div class="col-md-6">
                                            <label class="form-label small fw-bold text-secondary">Vai trò</label>
                                            <input type="text" id="input-role" class="form-control" readonly>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="account-security">
                        <div class="card h-100">
                            <div class="card-header p-4 pb-0">
                                <h5 class="fw-bold text-dark mb-0"><i class="bi bi-shield-check me-2 text-primary"></i>Bảo mật tài khoản</h5>
                            </div>
                            <div class="card-body p-4">
                                <div class="list-group list-group-flush">
                                    
                                    <div class="list-group-item px-0 py-3 border-bottom">
                                        <div class="d-flex align-items-center">
                                            <div class="me-3">
                                                <div class="bg-light rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                                    <i class="bi bi-key-fill text-primary fs-4"></i>
                                                </div>
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="fw-bold text-dark mb-1">Mật khẩu</h6>
                                                <small class="text-muted">Nên thay đổi mật khẩu định kỳ để bảo mật.</small>
                                            </div>
                                            <div>
                                                <a href="index.php?page=reset" class="btn btn-sm btn-outline-primary rounded-pill px-3">Thay đổi</a>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="list-group-item px-0 py-3 border-bottom">
                                        <div class="d-flex align-items-center">
                                            <div class="me-3">
                                                <div class="bg-light rounded-circle d-flex align-items-center justify-content-center" style="width: 50px; height: 50px;">
                                                    <i class="bi bi-envelope-check-fill text-success fs-4"></i>
                                                </div>
                                            </div>
                                            <div class="flex-grow-1">
                                                <h6 class="fw-bold text-dark mb-1">Email xác thực</h6>
                                                <span class="text-dark fw-bold small" id="sec-email-display">loading...</span>
                                                <span class="badge bg-success-subtle text-success ms-2 rounded-pill">Đã xác minh</span>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="tab-pane fade" id="account-billing">
                        <div class="card h-100">
                            <div class="card-header p-4 pb-0">
                                <h5 class="fw-bold text-dark mb-0"><i class="bi bi-gem me-2 text-warning"></i>Trạng thái gói</h5>
                            </div>
                            <div class="card-body p-4" id="membership-content">
                                <div class="text-center py-5">
                                    <div class="spinner-border text-primary mb-3" role="status"></div>
                                    <p class="text-muted fw-medium">Đang đồng bộ dữ liệu...</p>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

<script src="frontend/javascript/get.js"></script>
<script src="frontend/javascript/auth.js"></script>